./back-end/app.py:
from flask import Flask
from flask_cors import CORS
from models import db
from routes.quiz_routes import quiz_bp
from routes.auth_routes import auth_bp
from config import Config

def create_app():
    app = Flask(__name__)
    app.config.from_object(Config)
    CORS(app)
    db.init_app(app)

    app.register_blueprint(quiz_bp)
    app.register_blueprint(auth_bp, url_prefix='/api/auth')

    return app

if __name__ == '__main__':
    app = create_app()
    app.run(host='0.0.0.0', port=5000, debug=False)

./back-end/auth/auth_middleware.py:
from functools import wraps
from flask import request, jsonify
import jwt
from models import User

def login_required(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        token = None
        if 'Authorization' in request.headers:
            token = request.headers['Authorization'].split()[1]
        
        if not token:
            return jsonify({'message': 'Token is missing!'}), 401

        try:
            data = jwt.decode(token, 'your-secret-key', algorithms=['HS256'])
            current_user = User.query.filter_by(id=data['user_id']).first()
        except:
            return jsonify({'message': 'Token is invalid!'}), 401

        return f(current_user, *args, **kwargs)

    return decorated

./back-end/config.py:
import os

class Config:
    DB_USERNAME = 'system' # os.getenv('DB_USERNAME')
    DB_PASSWORD = 'test123' # os.getenv('DB_PASSWORD')
    DB_HOST = os.getenv('DB_HOST', 'localhost')
    DB_PORT = os.getenv('DB_PORT', '5432')
    DB_NAME = os.getenv('DB_NAME', 'quizdb')
    SECRET_KEY = os.environ.get('SECRET_KEY') or 'your-secret-key'
    SQLALCHEMY_DATABASE_URI = f"postgresql://{DB_USERNAME}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}"
    SQLALCHEMY_TRACK_MODIFICATIONS = False

    GOOGLE_CLIENT_ID = os.getenv('GOOGLE_CLIENT_ID')
    GOOGLE_CLIENT_SECRET = os.getenv('GOOGLE_CLIENT_SECRET')

./back-end/models/quiz.py:
# models/quiz.py
from . import db
from datetime import datetime

class Subject(db.Model):
    subjectID = db.Column(db.String, primary_key=True)
    name = db.Column(db.String, nullable=False)
    description = db.Column(db.Text)
    endpoint = db.Column(db.Text)
    subheading = db.Column(db.Text)
    icon = db.Column(db.Text)
    quizzes = db.relationship('Quiz', backref='subject_ref', lazy=True)

    def to_dict(self):
        return {
            'SubjectId': self.subjectID,
            'SubjectName': self.name,
            'description': self.description,
            'endpoint': self.endpoint,
            'subheading': self.subheading,
            'icon': self.icon
        }


class Quiz(db.Model):
    quizID = db.Column(db.String, primary_key=True)
    subjectID = db.Column(db.String, db.ForeignKey('subject.subjectID'), nullable=False)
    date = db.Column(db.Date, nullable=False)
    sourceFile = db.Column(db.String, nullable=False)
    questions = db.relationship('Question', backref='quiz', lazy=True)
    is_published = db.Column(db.Boolean, nullable=False)


    quiz_attempts = db.relationship('QuizAttempt', back_populates='quiz', lazy='dynamic')
    feedbacks = db.relationship('Feedback', back_populates='quiz', lazy=True)


    def to_dict(self):
        subject = Subject.query.get(self.subjectID)
        return {
            'quizID': self.quizID,
            'subjectName': subject.name if subject else None,
            'subjectId': self.subjectID,
            'questions': [question.to_dict_quiz() for question in self.questions]
        }

class Question(db.Model):
    quizID = db.Column(db.String, db.ForeignKey('quiz.quizID'), primary_key=True)
    questionNumber = db.Column(db.Integer, primary_key=True)
    questionText = db.Column(db.Text, nullable=False)
    answerOptions = db.Column(db.ARRAY(db.String), nullable=False)
    correctAnswer = db.Column(db.String, nullable=False)
    correctAnswerIndex = db.Column(db.Integer, nullable=False)
    hint = db.Column(db.Text)
    explanation = db.Column(db.Text)
    sources = db.Column(db.Text)
    grade = db.Column(db.String, nullable=False)
    gradeReason = db.Column(db.Text)

    def to_dict_quiz(self):
        return {
            'questionNumber': self.questionNumber,
            'questionText': self.questionText,
            'answerOptions': self.answerOptions,
            'correctAnswer': self.correctAnswer,
            'correctAnswerIndex': self.correctAnswerIndex,
            'hint': self.hint,
            'explanation': self.explanation
        }
    
    def to_dict(self):
        return {
            'quizID': self.quizID,
            'questionNumber': self.questionNumber,
            'questionText': self.questionText,
            'answerOptions': self.answerOptions,
            'correctAnswer': self.correctAnswer,
            'correctAnswerIndex': self.correctAnswerIndex,
            'hint': self.hint,
            'explanation': self.explanation,
            'sources': self.sources,
            'grade': self.grade,
            'gradeReason': self.gradeReason
        }

    def update_from_dict(self, data):
        for key, value in data.items():
            if hasattr(self, key):
                setattr(self, key, value)

    @classmethod
    def from_dict(cls, data):
        return cls(
            quizID=data.get('quizID'),
            questionNumber=data.get('questionNumber'),
            questionText=data.get('questionText'),
            answerOptions=data.get('answerOptions'),
            correctAnswer=data.get('correctAnswer'),
            correctAnswerIndex=data.get('correctAnswerIndex'),
            hint=data.get('hint'),
            explanation=data.get('explanation'),
            sources=data.get('sources'),
            grade=data.get('grade', ''),  # Provide a default value if not present
            gradeReason=data.get('gradeReason')
        )

class OriginalQuestion(db.Model):
    __tablename__ = 'original_question'
    quizID = db.Column(db.String, db.ForeignKey('quiz.quizID'), primary_key=True)
    questionNumber = db.Column(db.Integer, primary_key=True)
    questionText = db.Column(db.Text, nullable=False)
    answerOptions = db.Column(db.ARRAY(db.String), nullable=False)
    correctAnswer = db.Column(db.String, nullable=False)
    correctAnswerIndex = db.Column(db.Integer, nullable=False)
    hint = db.Column(db.Text)
    explanation = db.Column(db.Text)
    sources = db.Column(db.Text)
    ideas = db.Column(db.Text)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password = db.Column(db.String(60), nullable=True)  # Make password nullable
    name = db.Column(db.String(80), nullable=False)
    google_id = db.Column(db.String(120), unique=True, nullable=True)  # Add this line
    # quizAttempts = db.relationship('QuizAttempt', backref='user', lazy=True)
    feedbacks = db.relationship('Feedback', back_populates='user', lazy=True)


class QuizAttempt(db.Model):
    attemptID = db.Column(db.String, primary_key=True)
    user_id = db.Column(db.String, db.ForeignKey('user.id'), nullable=False)
    quizID = db.Column(db.String, db.ForeignKey('quiz.quizID'), nullable=False)
    score = db.Column(db.Integer)
    questionresults = db.Column(db.ARRAY(db.Integer))

    quiz = db.relationship('Quiz', back_populates='quiz_attempts')


    

    def to_dict(self):
        return {
            'attemptID': self.attemptID,
            'userID': str(self.user_id),
            'quizID': self.quizID,
            'date': self.quiz.date.isoformat(),
            'score': self.score,
            'questionresults': self.questionresults
        }
    

class Feedback(db.Model):
    feedbackID = db.Column(db.String, primary_key=True)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)
    quizID = db.Column(db.String, db.ForeignKey('quiz.quizID'), nullable=False)
    questionNumber = db.Column(db.Integer, nullable=False)
    feedback = db.Column(db.Text, nullable=False)
    date = db.Column(db.DateTime, nullable=False)
    user = db.relationship('User', back_populates='feedbacks')
    quiz = db.relationship('Quiz', back_populates='feedbacks')

    # Add relationship to Question table
    question = db.relationship('Question', 
                               primaryjoin="and_(Feedback.quizID==Question.quizID, "
                                           "Feedback.questionNumber==Question.questionNumber)",
                               foreign_keys=[quizID, questionNumber],
                               backref=db.backref('feedback', lazy='dynamic'))

    def to_dict(self):
        return {
            'feedbackID': self.feedbackID,
            'userID': self.user_id,  # Changed from self.userID to self.user_id
            'quizID': self.quizID,
            'feedback': self.feedback,
            'questionNumber': self.questionNumber,
            'date': self.date.isoformat(),
            'question': self.question.to_dict() if self.question else None
        }

class EditLog(db.Model):
    __tablename__ = 'edit_log'
    id = db.Column(db.Integer, primary_key=True)
    quizID = db.Column(db.String, db.ForeignKey('quiz.quizID'), nullable=False)
    questionNumber = db.Column(db.Integer, nullable=False)
    field = db.Column(db.String, nullable=False)
    oldText = db.Column(db.Text, nullable=False)
    newText = db.Column(db.Text, nullable=False)
    reason = db.Column(db.String, nullable=False)
    timestamp = db.Column(db.DateTime, nullable=False)
    user = db.Column(db.String, nullable=False)
    server_timestamp = db.Column(db.DateTime, default=datetime.utcnow)

    def to_dict(self):
        return {
            'id': self.id,
            'quizID': self.quizID,
            'questionNumber': self.questionNumber,
            'field': self.field,
            'oldText': self.oldText,
            'newText': self.newText,
            'reason': self.reason,
            'timestamp': self.timestamp.isoformat(),
            'user': self.user,
            'server_timestamp': self.server_timestamp.isoformat()
        }

./back-end/models/__init__.py:
from flask_sqlalchemy import SQLAlchemy

db = SQLAlchemy()

from .quiz import Quiz, Question, OriginalQuestion, User, QuizAttempt, Feedback

./back-end/routes/auth_routes.py:
from flask import Blueprint, request, jsonify, redirect, url_for
from flask_bcrypt import Bcrypt
from models import db, User
import jwt
import datetime
from google.oauth2 import id_token
from google.auth.transport import requests as google_auth_requests
import requests
import json
import os
from oauthlib.oauth2 import WebApplicationClient

auth_bp = Blueprint('auth', __name__)
bcrypt = Bcrypt()

GOOGLE_CLIENT_ID = os.getenv('GOOGLE_CLIENT_ID')
GOOGLE_CLIENT_SECRET = os.getenv('GOOGLE_CLIENT_SECRET')
os.environ['OAUTHLIB_INSECURE_TRANSPORT'] = '1'  # !!! Allow http for development but not for production environment


client = WebApplicationClient(GOOGLE_CLIENT_ID)

def get_google_provider_cfg():
    return requests.get("https://accounts.google.com/.well-known/openid-configuration").json()

@auth_bp.route('/login/google')
def google_login():
    try:
        # Redirect to Google's OAuth 2.0 server
        google_provider_cfg = get_google_provider_cfg()
        authorization_endpoint = google_provider_cfg["authorization_endpoint"]
        request_uri = client.prepare_request_uri(
            authorization_endpoint,
            redirect_uri=request.base_url + "/callback",
            scope=["openid", "email", "profile"],
        )
        return redirect(request_uri)
    except Exception as e:
        return jsonify({"error": str(e)}), 500

@auth_bp.route('/login/google/callback')
def google_callback():
    try:
        # Get authorization code Google sent back
        code = request.args.get("code")

        # Find out what URL to hit to get tokens
        google_provider_cfg = get_google_provider_cfg()
        token_endpoint = google_provider_cfg["token_endpoint"]

        # Prepare and send a request to get tokens
        token_url, headers, body = client.prepare_token_request(
            token_endpoint,
            authorization_response=request.url,
            redirect_url=request.base_url,
            code=code
        )
        token_response = requests.post(
            token_url,
            headers=headers,
            data=body,
            auth=(GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET),
        )

        # Parse the tokens
        client.parse_request_body_response(json.dumps(token_response.json()))

        # Get the user's profile information
        userinfo_endpoint = google_provider_cfg["userinfo_endpoint"]
        uri, headers, body = client.add_token(userinfo_endpoint)
        userinfo_response = requests.get(uri, headers=headers, data=body)

        # Verify the user's email
        if userinfo_response.json().get("email_verified"):
            unique_id = userinfo_response.json()["sub"]
            users_email = userinfo_response.json()["email"]
            users_name = userinfo_response.json()["given_name"]
        else:
            return "User email not available or not verified by Google.", 400

        # Create a user in your db with the information provided by Google
        user = User.query.filter_by(email=users_email).first()
        if not user:
            user = User(email=users_email, name=users_name, google_id=unique_id)
            db.session.add(user)
            db.session.commit()

        # Generate JWT token
        token = jwt.encode({
            'user_id': user.id,
            'exp': datetime.datetime.utcnow() + datetime.timedelta(days=1)
        }, 'your-secret-key', algorithm='HS256')

        success_script = f"""
        <script>
            window.opener.postMessage({{
                type: 'GOOGLE_LOGIN_SUCCESS',
                token: '{token}',
                user_id: {user.id},
                email: '{user.email}',
                name: '{user.name}'
            }}, 'http://localhost:3000');
            window.close();
        </script>
        """
        return success_script

    except Exception as e:
        error_script = f"""
        <script>
            window.opener.postMessage({{
                type: 'GOOGLE_LOGIN_FAILURE',
                message: 'Login failed: {str(e)}'
            }}, 'http://localhost:3000');
            window.close();
        </script>
        """
        return error_script

@auth_bp.route('/register', methods=['POST'])
def register():
    data = request.get_json()
    
    # Check if user already exists
    existing_user = User.query.filter_by(email=data['email']).first()
    if existing_user:
        return jsonify({"message": "User already exists"}), 400
    
    # Hash the password
    hashed_password = bcrypt.generate_password_hash(data['password']).decode('utf-8')
    
    # Create new user
    new_user = User(email=data['email'], password=hashed_password, name=data['name'])
    db.session.add(new_user)
    db.session.commit()
    
    return jsonify({"message": "User created successfully"}), 201

@auth_bp.route('/login', methods=['POST'])
def login():
    data = request.get_json()
    user = User.query.filter_by(email=data['email']).first()
    print(data.get('password'))
    if user and bcrypt.check_password_hash(user.password, data['password']):
        token = jwt.encode({
            'user_id': user.id,
            'exp': datetime.datetime.utcnow() + datetime.timedelta(days=1)
        }, 'your-secret-key', algorithm='HS256')
        
        return jsonify({
            "token": token,
            "user_id": user.id,
            "email": user.email,
            "name": user.name
        }), 200
    
    return jsonify({"message": "Invalid credentials"}), 401

./back-end/routes/quiz_routes.py:
from flask import Blueprint, jsonify, request, render_template, make_response, url_for
from datetime import datetime
import uuid

from auth.auth_middleware import login_required
from services.quiz_service import QuizService


quiz_bp = Blueprint('quiz', __name__)

def get_or_create_user_id():
    user_id = request.cookies.get('user_id')
    if not user_id:
        user_id = str(uuid.uuid4())
    return user_id

@quiz_bp.route('/api/init')
def init_page():
    print('Init page')
    subjects = QuizService.get_all_subjects()
    
    subject_data = jsonify([
        s.to_dict()
        for s in subjects  
    ])
    
    user_id = get_or_create_user_id()
    response = make_response(subject_data)
    response.set_cookie('user_id', user_id, max_age=60*60*24*365)  # Cookie expires in 1 year
    return response

@quiz_bp.route('/api/subjects')
def get_subjects():
    subjects = QuizService.get_all_subjects()
    return jsonify([subject.to_dict() for subject in subjects])


@quiz_bp.route('/api/quiz/<subject_id>')
@login_required
def get_quiz(current_user, subject_id):
    print('Get quiz')
    print(subject_id)
    print(current_user.id)
    quiz = QuizService.get_todays_quiz(subject_id)
    # check if user has already taken the quiz
    user_id = current_user.id
    has_taken_quiz = QuizService.has_user_taken_quiz_today(user_id, subject_id)
    if has_taken_quiz:
        pass
        #return jsonify({'message': 'You have already taken the quiz today.', "status": 407})

    return jsonify(quiz.to_dict())

@quiz_bp.route('/api/quiz/submit', methods=['POST'])
@login_required
def submit_quiz(current_user):
    user_id = current_user.id
    data = request.get_json()
    QuizService.record_quiz_attempt(user_id, data['quizId'], data['answers'], data['score'])
    return jsonify({'success': True})

@quiz_bp.route('/api/quiz/feedback', methods=['POST'])
@login_required
def submit_feedback(current_user):
    user_id = current_user.id
    data = request.get_json()
    print(data, user_id)
    QuizService.submit_feedback(
        user_id,
        data['quizId'],
        data['questionNumber'],
        data['feedback']
    )
    return jsonify({'success': True})

./back-end/routes/__init__.py:


./back-end/services/quiz_service.py:
# services/db_service.py

from models import db
from models.quiz import Subject, Quiz, Question, User, QuizAttempt, Feedback
from sqlalchemy.orm import joinedload
from datetime import datetime, date
import uuid

class QuizService:
    @staticmethod
    def get_all_subjects():
        return Subject.query.all()

    @staticmethod
    def get_subject(subject_id):
        Subjects = Subject.query.get(subject_id)
        print(Subjects)
        return Subject.query.get(subject_id)

    @staticmethod
    def get_todays_quiz(subject_id) :
        today = date.today()
        # today = 2024-07-16 formatted
        today = "2024-07-16"
        # today = today.strftime("%Y-%m-%d")
        return Quiz.query.filter_by(subjectID=subject_id, date=today).first()

    @staticmethod
    def get_or_create_user(user_id):
        user = User.query.get(user_id)
        if not user:
            user = User(userID=user_id)
            db.session.add(user)
            db.session.commit()
        return user

    @staticmethod
    def has_user_taken_quiz_today(user_id, subject_id):
        quiz_id = QuizService.get_todays_quiz(subject_id).quizID
        attempt = QuizAttempt.query.filter_by(
            user_id=user_id,
            quizID=quiz_id
        ).first()
        return attempt is not None

    @staticmethod
    def record_quiz_attempt(user_id, quiz_id, question_results, total_score):
        results_array = [r['isCorrect'] for r in question_results]
        results_array = [1 if r else 0 for r in results_array]
        print(results_array)
        attempt = QuizAttempt(
            attemptID=str(uuid.uuid4()),
            user_id=user_id,
            quizID=quiz_id,
            score=total_score,
            questionresults=results_array
        )
        db.session.add(attempt)
        db.session.commit()

    @staticmethod
    def submit_feedback(user_id, quiz_id, question_number, feedback_text):
        feedback = Feedback(
            feedbackID=str(uuid.uuid4()),
            user_id=user_id,
            quizID=quiz_id,
            questionNumber=question_number,
            feedback=feedback_text,
            date=datetime.now()
        )
        db.session.add(feedback)
        db.session.commit()

./back-end/services/__init__.py:


./dailymed/app/globals.css:
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 240 5.9% 10%;
    --primary-foreground: 0 0% 98%;
    --secondary: 240 4.8% 95.9%;
    --secondary-foreground: 240 5.9% 10%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 240 4.8% 95.9%;
    --accent-foreground: 240 5.9% 10%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 240 10% 3.9%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --header-height: 0px;
  }

  .dark {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 240 4.9% 83.9%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

./dailymed/app/layout.tsx:
'use client';

import '@/styles/globals.css'
import Header from '@/components/header'
import { Kameron } from 'next/font/google'
import { SubjectsProvider } from '@/contexts/SubjectsContext'
import SmoothScroll from '@/components/ui/SmoothScroll';
import { ToasterProvider } from '@/components/ToasterProvider'

const kameron = Kameron({ 
  weight: ['400', '700'],
  subsets: ['latin'],
  variable: '--font-kameron',
})

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    <html lang="en">
      <body className={`${kameron.variable} bg-background`}>
        <SmoothScroll />
        <SubjectsProvider>
        <ToasterProvider>

        <div className="flex flex-col min-h-screen">
          <Header />
          <main className="flex-grow mt-[var(--header-height)]">
          {children}
          </main>
          <footer className="bg-primary text-white text-center py-4">
            <p>&copy; 2024 DailyMed</p>
          </footer>
          </div>
          </ToasterProvider>

        </SubjectsProvider>
      </body>
    </html>
  )
}

./dailymed/app/page.tsx:
"use client";

import React from 'react';
import HeroSection from '@/components/HeroSection';
import Container from '@/components/Container';
import GradientSeparator from '@/components/GradientSeparator';
import SubjectsSection from '@/components/SubjectSection';
import AboutSection from '@/components/AboutSection';
import WorkflowSection from '@/components/WorkflowSection';

interface Subject {
  name: string;
  endpoint: string;
  description: string;
  subheading: string;
  icon: string;
  color: '';
}
interface MainPageProps {
  subjects: Subject[];
}

const MainPage: React.FC<MainPageProps> = () => {
  return (
    <div>
      <HeroSection />
      <GradientSeparator />
      <Container>
        {/* Other page content */}
        <SubjectsSection />
        {/* More content */}
      </Container>
      <GradientSeparator />
      <AboutSection id="about"/>
      <GradientSeparator />
      <WorkflowSection id="workflow"/>
      <GradientSeparator className='h-8' />
    </div>
  );
};

export default MainPage;

./dailymed/app/quiz/[subjectId]/page.tsx:
"use client";

import React from 'react';
import QuizContainer from '@/components/quiz/QuizContainer';

export default function QuizPage({ params }: { params: { subjectId: string } }) {
  return (
    <main className="flex-grow flex items-center justify-center bg-background px-4 py-8">
      <QuizContainer subjectId={params.subjectId} />
    </main>
  );
}

./dailymed/components/AboutSection.tsx:

import React from 'react';
import Container from './Container';


const AboutSection: React.FC<{ id?: string }> = ({ id }) => {
    return (
      <section id={id} className="py-12">
        <Container>
        <img src="/logo.svg" alt="logo" className="h-24 w-24 mx-auto justify-center" />
        <h2 className="text-3xl font-bold font-kameron text-primary/80 text-center mb-8">About</h2>
        
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 max-w-5xl">
        <p className="text-l text-gray-600 text-justify">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vestibulum fermentum mauris ut mattis. Integer vestibulum cursus interdum. Aenean iaculis est eu consequat ultrices. Praesent eleifend posuere sollicitudin. Phasellus a nunc eget lectus iaculis cursus in dapibus nisi. Etiam id purus dolor. Integer viverra lectus eget nisi viverra, non accumsan ligula efficitur. Donec efficitur enim pharetra mi dapibus, vitae convallis risus tempus. Ut viverra dui vel ante dictum, ultrices maximus mi laoreet. Sed fringilla dictum feugiat.
        </p>        <p className="text-l text-gray-600 text-justify">In hac habitasse platea dictumst. Aliquam in metus tortor. In dapibus ultrices scelerisque. Proin laoreet odio et turpis mattis pulvinar. Etiam non risus maximus, laoreet dui non, pellentesque orci. Fusce quis nibh nec elit congue dignissim ac ut elit. Donec placerat, metus sed dapibus viverra, nibh massa semper justo, in commodo purus ante sed lacus. Maecenas at cursus ante, ac consequat urna. Praesent sed pellentesque neque, a ornare magna. Vestibulum posuere dolor eget arcu euismod tristique. Nunc tempus lorem et tortor pretium placerat.
        </p>        <p className="text-l text-gray-600 text-justify">Nulla posuere eget lorem eu dapibus. Vestibulum nulla risus, blandit non pellentesque eget, ultricies a sem. Donec mattis ante lectus. In et iaculis leo, sit amet aliquet sapien. Vivamus sed elit non dolor consectetur suscipit. Phasellus mi arcu, venenatis a dolor vel, tincidunt luctus ex. In bibendum condimentum ipsum et sodales. Ut dapibus mi eros, vel porta sapien finibus non.
        </p>        <p className="text-l text-gray-600 text-justify">Maecenas placerat tellus eget pulvinar feugiat. Praesent molestie magna a velit commodo, vitae eleifend massa consectetur. Quisque in ornare arcu. Vivamus dapibus magna nulla, nec maximus dolor semper iaculis. Nullam ut consectetur lorem, non semper ipsum. Proin et pharetra odio, id interdum eros. Donec eros augue, aliquam at magna in, cursus condimentum orci. Donec ultricies dui eleifend, maximus elit a, bibendum sem. Proin non nunc ut nunc euismod pellentesque. Nullam ut dignissim ante.
        </p>
</div>
    </Container>
         </section>
 );
};

export default AboutSection;

./dailymed/components/AccountSettingsDialog.tsx:
import React from 'react'
import { Button } from "@/components/ui/button"
import {
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { useCustomToast } from './ToasterProvider'

const AccountSettingsDialog = ({ onLogout }) => {
  const showToast = useCustomToast()

  const handleLogout = () => {
    onLogout()
    showToast('Logged out successfully', 'success')
  }

  return (
    <div>
        <DialogHeader>
          <DialogTitle>Account Settings</DialogTitle>
          <DialogDescription>
            Manage your account settings here.
          </DialogDescription>
        </DialogHeader>
        <div className="grid gap-4 py-4">
          <Button onClick={handleLogout} variant="destructive">
            Log out
          </Button>
        </div>
        </div>


  )
}

export default AccountSettingsDialog

./dailymed/components/Authentication.tsx:
import React, { useState, useEffect } from 'react'
import { User, LogOut } from 'lucide-react'
import { Button } from '@/components/ui/button'
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog'
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from '@/components/ui/drawer'
import { Input } from '@/components/ui/input'
import { useCustomToast } from '@/components/ToasterProvider'
import AccountSettingsDialog from '@/components/AccountSettingsDialog'
import api from '@/utils/api'


// Custom useMediaQuery hook
const useMediaQuery = (query: string) => {
  const [matches, setMatches] = useState(false)

  useEffect(() => {
    const media = window.matchMedia(query)
    if (media.matches !== matches) {
      setMatches(media.matches)
    }
    const listener = () => setMatches(media.matches)
    media.addListener(listener)
    return () => media.removeListener(listener)
  }, [matches, query])

  return matches
}

const useAuth = () => {
  const showToast = useCustomToast()

  const handleLogin = async (email, password) => {
    try {
      const response = await api.post('/auth/login', { email, password });
      if(response.status === 200) {
        localStorage.setItem('token', response.data.token);
        localStorage.setItem('user', JSON.stringify({
          id: response.data.user_id,
          email: response.data.email,
          name: response.data.name
        }));
        showToast('Log in successful!', 'success')
        return true;
      } else {
        showToast(response.data.message || 'Log in failed', 'error')
        return false;
      }
    } catch (error) {
      showToast('An unexpected error occurred', 'error')
      return false;
    }
  };

  const handleRegister = async (email, name, password) => {
    try {
      const response = await fetch('http://localhost:5000/api/auth/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, name, password }),
      });
      const data = await response.json();
      if (response.ok) {
        showToast('Registration successful!', 'success')
        return true;
        
      } else {
        showToast(data.message || 'Log in failed', 'error')
        return false;
      }
    } catch (error) {
      console.error('Registration error:', error);  
      return false;
    }
  };

  return { handleLogin, handleRegister };
};

type LoginFormProps = {
  onSubmit: (email: string, password: string) => void;
  onSwitchToRegister: () => void;
  onGoogleLoginSuccess: () => void;
};

const LoginForm = ({ onSubmit, onSwitchToRegister, onGoogleLoginSuccess }: LoginFormProps) => {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const showToast = useCustomToast();

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    onSubmit(email, password);
  };

  const handleGoogleLogin = () => {
    const width = 500;
    const height = 600;
    const left = (window.screen.width / 2) - (width / 2);
    const top = (window.screen.height / 2) - (height / 2);

    const popup = window.open(
      'http://localhost:5000/api/auth/login/google',
      'GoogleLogin',
      `width=${width},height=${height},left=${left},top=${top}`
    );

    if (popup) {
      window.addEventListener('message', async (event) => {
        if (event.origin !== 'http://localhost:5000') return;

        if (event.data.type === 'GOOGLE_LOGIN_SUCCESS') {
          popup.close();
          localStorage.setItem('token', event.data.token);
          showToast('Google login successful!', 'success');
          onGoogleLoginSuccess();

        } else if (event.data.type === 'GOOGLE_LOGIN_FAILURE') {
          popup.close();
          showToast(event.data.message || 'Google login failed', 'error');
        }
      });
    } else {
      showToast('Unable to open popup window. Please check your browser settings.', 'error');
    }
  };

  return (
    <form className="py-4" onSubmit={handleSubmit}>
      <div className="grid gap-4">
        <Input
          type="email"
          id="email"
          placeholder="Enter your email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
        />
        <Input
          type="password"
          id="password"
          placeholder="Enter your password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />
        <Button type="submit">Log in</Button>
        <Button type="button" onClick={handleGoogleLogin} className="bg-accent hover:bg-accent/80 text-gray-700 border border-gray-300">
          <img src="/google-icon.webp" alt="Google" className="w-6 h-6 mr-2" />
          Sign in with Google
        </Button>
        <p className="text-sm text-center">
          Not yet registered?{' '}
          <button
            type="button"
            className="text-primary underline"
            onClick={onSwitchToRegister}
          >
            Create an account
          </button>
        </p>
      </div>
    </form>
  )
}

type RegisterFormProps = {
  onSubmit: (email: string, name: string, password: string) => void;
  onSwitchToLogin: () => void;
};

const RegisterForm = ({ onSubmit, onSwitchToLogin }: RegisterFormProps) => {
  const [email, setEmail] = useState('');
  const [name, setName] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');

  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    if (password !== confirmPassword) {
      console.error("Passwords don't match");
      return;
    }
    onSubmit(email, name, password);
  };

  return (
    <form className="py-4" onSubmit={handleSubmit}>
      <div className="grid gap-4">
        <Input
          type="email"
          id="register-email"
          placeholder="Enter your email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
        />
        <Input
          id="name"
          placeholder="Enter your name"
          value={name}
          onChange={(e) => setName(e.target.value)}
        />
        <Input
          type="password"
          id="register-password"
          placeholder="Create a password"
          value={password}
          onChange={(e) => setPassword(e.target.value)}
        />
        <Input
          type="password"
          id="confirm-password"
          placeholder="Confirm your password"
          value={confirmPassword}
          onChange={(e) => setConfirmPassword(e.target.value)}
        />
        <Button type="submit">Register</Button>
        <p className="text-sm text-center">
          Already have an account?{' '}
          <button
            type="button"
            className="text-primary underline"
            onClick={onSwitchToLogin}
          >
            Log in
          </button>
        </p>
      </div>
    </form>
  )
}

const AuthComponent = ({ initialMode = 'login' }) => {
  const [isOpen, setIsOpen] = useState(false)
  const [mode, setMode] = useState(initialMode)
  const [isLoggedIn, setIsLoggedIn] = useState(false)
  const isDesktop = useMediaQuery("(min-width: 768px)")
  const { handleLogin, handleRegister } = useAuth()
  const showToast = useCustomToast()

  useEffect(() => {
    const token = localStorage.getItem('token')
    setIsLoggedIn(!!token)
  }, [])

  const handleLogout = () => {
    localStorage.removeItem('token')
    setIsLoggedIn(false)
    setIsOpen(false)
    showToast('Logged out successfully', 'success')
  }

  const onLoginSubmit = async (email, password) => {
    const success = await handleLogin(email, password)
    if (success) {
      setIsLoggedIn(true)
      setIsOpen(false)
    }
  }

  const onRegisterSubmit = async (email, name, password) => {
    const success = await handleRegister(email, name, password)
    if (success) {
      setIsLoggedIn(true)
      setIsOpen(false)
    }
  }

  const onGoogleLoginSuccess = () => {
    setIsLoggedIn(true)
    setIsOpen(false)
  }

  const content = isLoggedIn ? (
    <AccountSettingsDialog onLogout={handleLogout} />
  ) : (
    <>
      <DialogHeader>
        <img src="/full-logo.svg" alt="DailyMed Logo" className="h-14 w-auto m-3 justify-center" />
        <DialogTitle>{mode === 'login' ? 'Log in' : 'Create an account'}</DialogTitle>
        <DialogDescription>
          {mode === 'login' 
            ? 'Enter your credentials to access your account.' 
            : 'Fill in the details below to create your account.'}
        </DialogDescription>
      </DialogHeader>
      {mode === 'login' ? (
        <LoginForm 
          onSubmit={onLoginSubmit} 
          onSwitchToRegister={() => setMode('register')} 
          onGoogleLoginSuccess={onGoogleLoginSuccess}

        />
      ) : (
        <RegisterForm 
          onSubmit={onRegisterSubmit} 
          onSwitchToLogin={() => setMode('login')} 
        />
      )}
    </>
  )

  if (isDesktop) {
    return (
      <Dialog open={isOpen} onOpenChange={setIsOpen}>
        <DialogTrigger asChild>
          <Button variant="outline" size="icon" className="text-primary">
            <User className="h-5 w-5" />
          </Button>
        </DialogTrigger>
        <DialogContent className="sm:max-w-[425px]">
          {content}
        </DialogContent>
      </Dialog>
    )
  }

  return (
    <Drawer open={isOpen} onOpenChange={setIsOpen}>
      <DrawerTrigger asChild>
        <Button variant="outline" size="icon" className="text-primary">
          <User className="h-5 w-5" />
        </Button>
      </DrawerTrigger>
      <DrawerContent>
        <DrawerHeader className="text-left">
          <DrawerTitle>{isLoggedIn ? 'Account Settings' : (mode === 'login' ? 'Log in' : 'Create an account')}</DrawerTitle>
          {!isLoggedIn && (
            <DrawerDescription>
              {mode === 'login' 
                ? 'Enter your credentials to access your account.' 
                : 'Fill in the details below to create your account.'}
            </DrawerDescription>
          )}
        </DrawerHeader>
        {content}
        <DrawerFooter className="pt-2">
          <DrawerClose asChild>
            <Button variant="outline">Close</Button>
          </DrawerClose>
        </DrawerFooter>
      </DrawerContent>
    </Drawer>
  )
}

export default AuthComponent;

export { AuthComponent };

./dailymed/components/Container.tsx:
import React from 'react';

interface ContainerProps {
  children: React.ReactNode;
  className?: string;
}

const Container: React.FC<ContainerProps> = ({ children, className = '' }) => {
  return (
    <div className={`max-w-[70%] mx-auto ${className}`}>
      {children}
    </div>
  );
};

export default Container;

./dailymed/components/GlowingBorder.tsx:
import React from 'react';
import styled, { keyframes } from 'styled-components';

interface GlowingBorderProps {
  borderGradient?: string;
  glowColor?: string;
  animationDuration?: number;
  borderWidth?: number;
  borderRadius?: number;
  className?: string;
}

const defaultGradient = 'linear-gradient(90deg, #DFE9ED 0%, #F1BA6D 25%, #57B5A6 50%, #16443C80 75%, #DFE9ED 100%)';

const flowAnimation = keyframes`
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
`;

const BorderContainer = styled.div<{
  $borderGradient: string;
  $glowColor: string;
  $animationDuration: number;
  $borderWidth: number;
  $borderRadius: number;
}>`
  position: relative;
  border-radius: ${props => props.$borderRadius}px;
  transition: transform 0.3s ease;

  &::before,
  &::after {
    content: '';
    position: absolute;
    inset: -${props => props.$borderWidth}px;
    border-radius: inherit;
    background: ${props => props.$borderGradient};
    background-size: 200% 100%;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  &::before {
    z-index: -1;
  }

  &::after {
    filter: blur(${props => props.$borderWidth * 2}px);
    z-index: -2;
  }

  &:hover::before,
  &:hover::after {
    opacity: 1;
    animation: ${flowAnimation} ${props => props.$animationDuration}s linear infinite;
  }

  &:hover {
    transform: scale(1.05);
  }
`;

const ContentContainer = styled.div`
  position: relative;
  z-index: 1;
`;

const GlowingBorder: React.FC<GlowingBorderProps & { children: React.ReactNode }> = ({
  children,
  borderGradient = defaultGradient,
  glowColor,
  animationDuration = 3,
  borderWidth = 2,
  borderRadius = 8,
  className,
}) => {
  return (
    <BorderContainer
      $borderGradient={borderGradient}
      $glowColor={glowColor || borderGradient}
      $animationDuration={animationDuration}
      $borderWidth={borderWidth}
      $borderRadius={borderRadius}
      className={className}
    >
      <ContentContainer>
        {children}
      </ContentContainer>
    </BorderContainer>
  );
};

export default GlowingBorder;

./dailymed/components/GradientSeparator.tsx:
import React from 'react';

interface GradientSeparatorProps {
  className?: string;
}

const GradientSeparator: React.FC<GradientSeparatorProps> = ({ className = '' }) => {
  return (
    <div 
      className={`
        h-1 
        shadow-sm
        bg-[linear-gradient(to_right,#DFE9ED_0%,#F1BA6D_25%,#57B5A6_50%,#16443C80_75%,#DDE8EC_100%)]
        ${className}
      `}
    ></div>
  );
};

export default GradientSeparator;

./dailymed/components/header.tsx:
import React, { useRef, useEffect } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import GradientSeparator from '@/components/GradientSeparator';
import { User, Sun } from 'lucide-react';
import { Button } from "@/components/ui/button";
import NavigationMenu from '@/components/NavMenu';
import { AuthComponent  } from '@/components/Authentication';

const Header = () => {
  const headerRef = useRef<HTMLDivElement>(null);
  const pathname = usePathname();

  useEffect(() => {
    if (headerRef.current) {
      const height = headerRef.current.offsetHeight;
      document.documentElement.style.setProperty('--header-height', `${height}px`);
    }
  }, []);

  const isQuizPage = pathname?.startsWith('/quiz/');

  return (
    <header ref={headerRef} className="bg-white opacity-90 fixed top-0 left-0 right-0 z-50">
      <div className="container mx-auto px-4 flex justify-between items-center">
        <Link href="/">
          <div className="flex items-center space-x-2">
            <img src="/full-logo.svg" alt="DailyMed Logo" className="h-14 w-auto m-3" />
          </div>
        </Link>
        <nav className="flex items-center space-x-6">
          {!isQuizPage && <NavigationMenu />} {/* Only show the menu on non-quiz pages */}
          {!isQuizPage && <AuthComponent initialMode="login" />} {/* Only show the auth component on non-quiz pages */}
          <Button variant="outline" size="icon" className="text-primary">
            <Sun className="h-5 w-5" />
          </Button>
        </nav>
      </div>
      <GradientSeparator className="absolute bottom-0 left-0 right-0" />
    </header>
  );
};

export default Header;

./dailymed/components/HeroSection.tsx:
import React from 'react';
import Container from './Container'; // Adjust the import path as needed
import Link from 'next/link'; 
import { AuthComponent } from '@/components/Authentication'; // Adjust the import path as needed
import { Button } from '@/components/ui/button'; // Adjust the import path as needed

const HeroSection = () => {
  return (
    <section className="py-12">
      <Container>
        <div className="flex flex-col md:flex-row items-center justify-between">
          <div className="md:w-1/3 space-y-4">
            <p className="text-sm font-semibold font-kameron text-primary uppercase">VERIFIED</p>
            <h1 className="text-4xl font-bold font-kameron text-primary">
              Medical Quizzes on Expert level
            </h1>
            <div className="flex flex-wrap space-x-5 pt-4 mr-5">
              <Link href="/#about" legacyBehavior passHref scroll={false}> 
              <button className="flex-none w-auto px-6 py-2 mt-5 bg-secondary/80 text-black rounded-full hover:bg-secondary/90 transition-colors">
                How does it work?
              </button>
              </Link>
              {/* <AuthComponent initialMode="register" />  */}
            </div>
          </div>
          <div className="md:w-2/3 mt-8 md:mt-0">
            <div className="bg-gray-200 w-auto h-128 flex items-center justify-center">
              <img src="/placeholder_hero.webp" alt="Hero Image" className="h-128" />
            </div>
          </div>
        </div>
      </Container>
    </section>
  );
};

export default HeroSection;

./dailymed/components/LoadingSpinner.tsx:
import React from 'react';

const LoadingSpinner = () => (
  <div className="flex justify-center items-center h-50">
    <div className="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-primary"></div>
  </div>
);

export default LoadingSpinner;

./dailymed/components/NavMenu.tsx:
'use client';
import React from 'react';
import Link from 'next/link';
import { NavigationMenu, NavigationMenuList, NavigationMenuItem, NavigationMenuLink, NavigationMenuTrigger, NavigationMenuContent, navigationMenuTriggerStyle } from '@/components/ui/navigation-menu';
import { useSubjects } from '@/contexts/SubjectsContext';

interface Subject {
  subjectId: string;
  subjectName: string;
}

const NavMenu = () => {
  const { subjects, isLoading } = useSubjects();

  return (
      <NavigationMenu>
        <NavigationMenuList>
          <NavigationMenuItem>
            <NavigationMenuTrigger>
              Quiz Subjects
            </NavigationMenuTrigger>
            <NavigationMenuContent>
              {subjects.map(subject => (
                <Link key={subject.SubjectName} href={`/quiz/${subject.SubjectId}`} legacyBehavior passHref>
                  <NavigationMenuLink className={navigationMenuTriggerStyle()}>
                    {subject.SubjectName}
                  </NavigationMenuLink>
                </Link>
              ))}
            </NavigationMenuContent>
          </NavigationMenuItem>
          <NavigationMenuItem>
            <Link href="/#about" legacyBehavior passHref scroll={false}>
              <NavigationMenuLink className={navigationMenuTriggerStyle()}>
                About
              </NavigationMenuLink>
            </Link>
          </NavigationMenuItem>
          <NavigationMenuItem>
            <Link href="/#workflow" legacyBehavior passHref scroll={false}>
              <NavigationMenuLink className={navigationMenuTriggerStyle()}>
                Workflow
              </NavigationMenuLink>
            </Link>
          </NavigationMenuItem>
        </NavigationMenuList>
      </NavigationMenu>
    );
  };
  
  export default NavMenu;

./dailymed/components/quiz/FeedbackForm.tsx:
import React, { useState } from 'react';
import { Button } from '@/components/ui/button';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from '@/components/ui/drawer';
import { Textarea } from '@/components/ui/textarea';
import { useCustomToast } from '@/components/ToasterProvider';
import { sendFeedbackForm } from '@/utils/sendFeedbackForm';
import { isCompositeComponent } from 'react-dom/test-utils';

const useMediaQuery = (query: string) => {
  const [matches, setMatches] = useState(false);

  React.useEffect(() => {
    const media = window.matchMedia(query);
    if (media.matches !== matches) {
      setMatches(media.matches);
    }
    const listener = () => setMatches(media.matches);
    media.addListener(listener);
    return () => media.removeListener(listener);
  }, [matches, query]);

  return matches;
};


interface FeedbackFormProps {
  quizId: string;
  questionNumber: number;
  onFeedbackSubmitted: () => void;
  disabled?: boolean;
}

const FeedbackForm: React.FC<FeedbackFormProps> = ({ 
  quizId,
  questionNumber,
  onFeedbackSubmitted,
  disabled = false
}) => {
   const [isOpen, setIsOpen] = useState(false);
  const [feedback, setFeedback] = useState('');
  const isDesktop = useMediaQuery("(min-width: 768px)");
  const showToast = useCustomToast();

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    sendFeedbackForm({ quizId, questionNumber, feedback })
      .then(() => {
        console.log('Feedback submitted for question', questionNumber, ':', feedback);
        showToast('Feedback submitted successfully!', 'success');
        setFeedback('');
        setIsOpen(false);
        onFeedbackSubmitted();
      })
      .catch(() => {
        showToast('Failed to submit feedback. Please try again.', 'error');
      });
  };

  const content = (
    <>
      <DialogHeader>
        <DialogTitle>Feedback for Question {questionNumber}</DialogTitle>
        <DialogDescription>
          We appreciate your feedback. Please let us know your thoughts about this question.
        </DialogDescription>
      </DialogHeader>
      <form onSubmit={handleSubmit} className="space-y-4">
        <Textarea
          value={feedback}
          onChange={(e) => setFeedback(e.target.value)}
          placeholder="Enter your feedback here..."
          className="w-full"
        />
        <Button type="submit">Send Feedback</Button>
      </form>
    </>
  );

  if (isDesktop) {
    return (
      <Dialog open={isOpen} onOpenChange={setIsOpen}>
        <DialogTrigger asChild>
          <Button className="w-auto bg-accent hover:bg-accent/80" disabled={disabled}>Send Feedback</Button>
        </DialogTrigger>
        <DialogContent className="sm:max-w-[425px]">
          {content}
        </DialogContent>
      </Dialog>
    );
  }

  return (
    <Drawer open={isOpen} onOpenChange={setIsOpen}>
      <DrawerTrigger asChild>
        <Button className="w-auto bg-accent hover:bg-accent/80" disabled={disabled}>Send Feedback</Button>
      </DrawerTrigger>
      <DrawerContent>
        
        {content}
        <DrawerFooter className="pt-2">
          <DrawerClose asChild>
            <Button variant="outline">Close</Button>
          </DrawerClose>
        </DrawerFooter>
      </DrawerContent>
    </Drawer>
  );
};

export default FeedbackForm;

./dailymed/components/quiz/ProgressBar.tsx:
import React from 'react';

interface ProgressBarProps {
  current: number;
  total: number;
}

const ProgressBar: React.FC<ProgressBarProps> = ({ current, total }) => {
  const percentage = (current / total) * 100;
  if (percentage === 0 || (current === 0 && total === 0)) return null;
  return (
    <div className="w-full bg-subtleBackground rounded-full p-1 shadow-md">
      <div className="flex items-center">
        <div 
          className="bg-primary/80 h-2 rounded-full transition-all duration-300 ease-in-out" 
          style={{ width: `${percentage}%` }}
        ></div>
        <span className="text-xs font-medium text-primary font-kameron ml-2">
          {current} of {total}
        </span>
      </div>
    </div>
  );
};

export default ProgressBar;

./dailymed/components/quiz/Question.tsx:
import React from 'react';
import { Button } from "@/components/ui/button";

interface QuestionProps {
  question: {
    questionNumber: number;
    questionText: string;
    answerOptions: string[];
    correctAnswerIndex: number;
    hint: string;
  };
  onAnswer: (answerIndex: number) => void;
  userAnswer?: number;
  showExplanation: boolean;
}

const Question: React.FC<QuestionProps> = ({ question, onAnswer, userAnswer, showExplanation }) => {
  return (
    <div className="space-y-4">
      <h2 className="text-xl font-semibold font-kameron text-primary/80">Question {question.questionNumber}</h2>
      <p className="text-lg text-primary font-kameron">{question.questionText}</p>
      <div className="space-y-2">
        {question.answerOptions.map((option, index) => (
          <Button
          key={index}
          onClick={() => onAnswer(index)}
          disabled={showExplanation}
          variant={showExplanation 
            ? index === question.correctAnswerIndex 
              ? "correct" 
              : userAnswer === index 
                ? "incorrect" 
                : "muted"
            : userAnswer === index 
              ? "default" 
              : "quiz"
          }
          className="w-full justify-start text-left"
        >
          {option}
        </Button>
        ))}
      </div>
    </div>
  );
};

export default Question;

./dailymed/components/quiz/QuestionReview.tsx:
import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import FeedbackForm from './FeedbackForm';


interface QuestionReviewProps {
  quizId: string;
  question: {
    questionNumber: number;
    questionText: string;
    answerOptions: string[];
    correctAnswer: string;
    correctAnswerIndex: number;
    hint: string;
    explanation: string;
  };
  userAnswer: number;
  onClose: () => void;
  feedbackSubmitted: boolean;
  onFeedbackSubmitted: (questionNumber: number) => void;
}

const QuestionReview: React.FC<QuestionReviewProps> = ({ 
  quizId,
  question, 
  userAnswer, 
  onClose, 
  feedbackSubmitted, 
  onFeedbackSubmitted 
}) => {
  const handleFeedbackSubmitted = () => {
    onFeedbackSubmitted(question.questionNumber);
  };

  return (
    <Card className="w-full bg-subtleBackground mb-4">
      <CardHeader className="flex flex-row items-start justify-between">
        <CardTitle className="text-xl font-bold">Question {question.questionNumber}</CardTitle>
        <div className="flex items-center space-x-2">
          <FeedbackForm 
            quizId={quizId}
            questionNumber={question.questionNumber}
            onFeedbackSubmitted={handleFeedbackSubmitted}
            disabled={feedbackSubmitted}
          />
          <Button onClick={onClose} variant="outline" size="sm">
            Close
          </Button>
        </div>
      </CardHeader>
      <CardContent className="space-y-4">
        <p className="font-semibold">{question.questionText}</p>
        
        {question.answerOptions.map((option, index) => (
          <div
            key={index}
            className={`p-2 rounded ${
              index === question.correctAnswerIndex
                ? 'bg-correct-med'
                : index === userAnswer
                ? 'bg-incorrect-med'
                : 'bg-gray-200'
            }`}
          >
            {option}
          </div>
        ))}
        
        <div className="mt-4">
          <h3 className="font-semibold">Explanation:</h3>
          <p>{question.explanation}</p>
        </div>
        
        <div className="mt-4">
          <h3 className="font-semibold">Hint:</h3>
          <p>{question.hint}</p>
        </div>
        
        {feedbackSubmitted && (
          <p className="text-sm text-green-600">Thank you for your feedback!</p>
        )}
      </CardContent>
    </Card>
  );
};

export default QuestionReview;

./dailymed/components/quiz/QuizContainer.tsx:
import React, { useState, useEffect } from 'react';
import { Card, CardContent } from "@/components/ui/card";
import Link from 'next/link';

import { Button } from "@/components/ui/button";
import Question from './Question';
import ProgressBar from './ProgressBar';
import Results from './Results';
import Timer from './Timer';
import { sendQuizResults } from '@/utils/sendQuizResults';
import { LightbulbIcon } from 'lucide-react';
import { getQuizData } from '@/utils/getQuizData';
import LoadingSpinner from '@/components/LoadingSpinner';

interface QuizContainerProps {
    subjectId: string;
  }

const QuizContainer: React.FC<QuizContainerProps> = ({ subjectId }) => {
    const [quizData, setQuizData] = useState<any>(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState<string | null>(null);
    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(-1);
    const [userAnswers, setUserAnswers] = useState<number[]>([]);
    const [correct, setCorrect] = useState<boolean[]>([]);
    const [score, setScore] = useState(0);
    const [quizCompleted, setQuizCompleted] = useState(false);
    const [showExplanation, setShowExplanation] = useState(false);
    const [quizStarted, setQuizStarted] = useState(false);
    const [showHint, setShowHint] = useState(false);
    const [hintClicked, setHintClicked] = useState<boolean[]>([]);
    const [isAnswered, setIsAnswered] = useState(false);
    const [timeUp, setTimeUp] = useState(false);
    const [timerKey, setTimerKey] = useState(0);
    const [timeLeft, setTimeLeft] = useState(30);

    useEffect(() => {
        async function fetchQuizData() {
          try {
            const data = await getQuizData(subjectId);
            if ('status' in data && data.status === 407) {
              setError(data.message);
              setLoading(false);
              return;
            }
            if ('status' in data && data.status === 405) {
                setError(data.message);
                setLoading(false);
                return;
              }
            setQuizData(data);
            setCorrect(new Array(data.questions.length).fill(false));
            setHintClicked(new Array(data.questions.length).fill(false));
            setLoading(false);
          } catch (err) {
            console.error('Error fetching quiz data:', err);
            setError('Failed to load quiz data. Please try again later. Maybe you are not logged in?');
            setLoading(false);
          }
        }
        fetchQuizData();
      }, [subjectId]);

    
    const calculateQuestionScore = (answerIndex: number, timeRemaining: number) => {
        const isCorrect = answerIndex === quizData.questions[currentQuestionIndex].correctAnswerIndex;
        setCorrect(prevCorrect => {
            const newCorrect = [...prevCorrect];
            newCorrect[currentQuestionIndex] = isCorrect;
            return newCorrect;
        });


        const hintWasUsed = hintClicked[currentQuestionIndex];
        if (isCorrect) {
            if (hintWasUsed) {
                return 50;
            } else {
                return 100 + (timeRemaining * 2);
            }
        } else {
            if (hintWasUsed) {
                return -25;
            } else {
                return 0;
            }
        }
    };
  
    const handleAnswer = (answerIndex: number) => {
      if (isAnswered || timeUp) return;
      setIsAnswered(true);
      const newUserAnswers = [...userAnswers];
      newUserAnswers[currentQuestionIndex] = answerIndex;
      setUserAnswers(newUserAnswers);

      const questionScore = calculateQuestionScore(answerIndex, timeLeft);
      setScore(prevScore => prevScore + questionScore);
      setShowExplanation(true);
    };
  
    const handleNextQuestion = async () => {
      if (currentQuestionIndex < quizData.questions.length - 1) {
        setCurrentQuestionIndex(currentQuestionIndex + 1);
        setShowExplanation(false);
        setShowHint(false);
        setIsAnswered(false);
        setTimeUp(false);
        setTimerKey(prevKey => prevKey + 1);
      } else {
        setQuizCompleted(true);

        const quizResult = {
            quizId: quizData.quizID,
            score: score,
            answers: userAnswers.map((answer, index) => ({
              questionNumber: index + 1,
              userAnswer: answer,
              isCorrect: correct[index],
            })),
          };
      
          try {
            await sendQuizResults(quizResult);
          } catch (error) {
            console.error('Failed to send quiz results:', error);
          }
      }
    };
  
    const handleTimeUp = () => {
      if (!isAnswered && !timeUp) {
        setTimeUp(true);
        const newUserAnswers = [...userAnswers];
        newUserAnswers[currentQuestionIndex] = -1;
        setUserAnswers(newUserAnswers);
        setShowExplanation(true);
        const questionScore = calculateQuestionScore(currentQuestionIndex, 0);
        setScore(prevScore => prevScore + questionScore);
      }
    };


  const startQuiz = () => {
    setQuizStarted(true);
    setCurrentQuestionIndex(0);
  };

  const toggleHint = () => {
    if (!hintClicked[currentQuestionIndex]) {
      const newHintClicked = [...hintClicked];
      newHintClicked[currentQuestionIndex] = true;
      setHintClicked(newHintClicked);
      setShowHint(true);
    }
  };

  if (quizCompleted) {
    console.log(userAnswers, score, hintClicked);
    console.log(correct)
    // send score, correct, userAnswers to backend
    return <Results score={score} quizData={quizData} userAnswers={userAnswers} />;
}

const currentQuestion = quizData?.questions?.[currentQuestionIndex];

return (
    <div className="w-full max-w-6xl mx-auto min-h-[600px] flex flex-col">
      <div className="mb-4">
        <ProgressBar 
          current={currentQuestionIndex + 1} 
          total={quizData?.questions?.length ?? 0} 
        />
      </div>
      <Card className="w-full bg-subtleBackground shadow-lg flex-grow">
        <CardContent className="p-6 h-full flex flex-col">
          {loading ? (
            <LoadingSpinner />
          ) : error ? (
            <div className="flex flex-col items-center justify-center h-full">
              <div className="text-center text-red-500 mb-8">{error}</div>
              <Link href="/" passHref>
                <Button className="bg-accentColor text-textColor hover:bg-accentColor/80">
                  Go back
                </Button>
              </Link>
            </div>
          ) : !quizData ? (
            <div>No quiz data available.</div>
          ) : !quizStarted ? (
            <div className="text-center flex-grow flex flex-col justify-center">
              <h2 className="text-2xl font-bold mb-4 text-textColor font-kameron">{quizData.subjectName}</h2>
              <p className="mb-6 text-textColor font-kameron">
                *You will be doing an AI-generated quiz, this quiz has been reviewed by professionals, but there may still be mistakes in the questions and/or answers. In the results section there's an opportunity to provide feedback on these questions.
              </p>
              <Button onClick={startQuiz} className="bg-accentColor text-textColor hover:bg-accentColor/80 mx-auto">
                Start the Quiz!
              </Button>
            </div>
          ) : (
            <div className="flex h-full">
              <div className="w-2/3 pr-6 flex flex-col">
                {currentQuestion ? (
                  <Question
                    question={currentQuestion}
                    onAnswer={handleAnswer}
                    userAnswer={userAnswers[currentQuestionIndex]}
                    showExplanation={showExplanation}
                  />
                ) : (
                  <div>Loading question...</div>
                )}
              </div>
              <div className="w-1/3 pl-6 border-l border-secondaryColor flex flex-col">
                <div className="mb-4">
                  <Button 
                    onClick={toggleHint}
                    variant="hint"
                    className="w-full text-primaryColor flex items-center justify-end border-primaryColor"
                    disabled={hintClicked[currentQuestionIndex]}
                  >
                    <LightbulbIcon className="mr-2" size={18} />
                    Hint
                  </Button>
                </div>
                {showHint && currentQuestion && (
                  <div className="mb-4 p-4 bg-hint/20 rounded-lg">
                    <p className="text-primaryColor font-kameron">{currentQuestion.hint}</p>
                  </div>
                )}
                <div className="flex-grow"></div>
                {showExplanation && currentQuestion && (
                  <div className={`mb-4 p-4 ${userAnswers[currentQuestionIndex] === currentQuestion.correctAnswerIndex 
                        ? "bg-correct-med" : "bg-incorrect-med"} rounded-lg `}>
                    <h3 className="font-semibold font-kameron text-center text-primaryColor">
                      {userAnswers[currentQuestionIndex] === currentQuestion.correctAnswerIndex 
                        ? "Correct!" : "Incorrect"}
                    </h3>
                    <p className="text-primaryColor font-kameron">{currentQuestion.explanation}</p>
                  </div>
                )}
                <div className="mt-auto">
                  <Button 
                    onClick={handleNextQuestion} 
                    disabled={!showExplanation}
                    className="w-full bg-accentColor text-primaryColor/80 font-semibold hover:bg-accentColor/80"
                  >
                    {currentQuestionIndex < quizData.questions.length - 1 ? "Next Question >" : "Finish Quiz!"}
                  </Button>
                </div>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
      {quizStarted && currentQuestion && (
      <div className="mb-4">
      <Timer 
                key={timerKey}
                initialTime={30}
                onTimeUp={handleTimeUp}
                isAnswered={isAnswered || timeUp}
                questionIndex={currentQuestionIndex}
                onTimeChange={(time) => setTimeLeft(time)}
              />
  </div>
    )}
    </div>
  );
};

export default QuizContainer;      

./dailymed/components/quiz/Results.tsx:
import React, { useState } from 'react';
import Link from 'next/link';
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import QuestionReview from './QuestionReview';

interface QuizData {
  quizID: string;
  subjectName: string;
  subjectId: string;
  questions: Array<{
    questionNumber: number;
    questionText: string;
    answerOptions: string[];
    correctAnswer: string;
    correctAnswerIndex: number;
    hint: string;
    explanation: string;
  }>;
}

interface ResultsProps {
  score: number;
  quizData: QuizData;
  userAnswers: number[];
}

const Results: React.FC<ResultsProps> = ({ score, quizData, userAnswers }) => {
  const [selectedQuestion, setSelectedQuestion] = useState<number | null>(null);
  const [submittedFeedback, setSubmittedFeedback] = useState<number[]>([]);

  const handleQuestionClick = (questionNumber: number) => {
    setSelectedQuestion(questionNumber);
  };

  const handleFeedbackSubmitted = (questionNumber: number) => {
    setSubmittedFeedback(prev => [...prev, questionNumber]);
  };

  return (
    <div className="w-full max-w-4xl mx-auto">
      <Card className="bg-subtleBackground mb-4">
        <CardHeader>
          <CardTitle className="text-2xl font-bold text-center">Quiz Completed!</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="text-center">
            <p className="text-4xl font-bold">Score: {score}</p>
          </div>
          
          <div className="grid grid-cols-4 gap-2">
            {quizData.questions.map((question, index) => (
              <Button
                key={question.questionNumber}
                onClick={() => handleQuestionClick(index)}
                className={`${userAnswers[index] === question.correctAnswerIndex ? 'bg-correct-med' : 'bg-incorrect-med'}`}
              >
                Question {question.questionNumber}
              </Button>
            ))}
          </div>
          <div className="flex justify-end">
            <Link href="/" passHref>
              <Button className="w-auto bg-accent hover:bg-accent/80">Return to Home</Button>
            </Link>
          </div>
        </CardContent>
      </Card>
      
      {selectedQuestion !== null && (
        <QuestionReview
        quizId={quizData.quizID}
          question={quizData.questions[selectedQuestion]}
          userAnswer={userAnswers[selectedQuestion]}
          onClose={() => setSelectedQuestion(null)}
          feedbackSubmitted={submittedFeedback.includes(quizData.questions[selectedQuestion].questionNumber)}
          onFeedbackSubmitted={handleFeedbackSubmitted}
        />
      )}
    </div>
  );
};

export default Results;

./dailymed/components/quiz/Timer.tsx:
import React, { useState, useEffect } from 'react';

interface TimerProps {
  initialTime: number; // Time in seconds
  onTimeUp: () => void;
  isAnswered: boolean;
  questionIndex: number; // Add this prop
  onTimeChange: (time: number) => void;

}

const Timer: React.FC<TimerProps> = ({ initialTime, onTimeUp, isAnswered, questionIndex, onTimeChange }) => {
  const [timeLeft, setTimeLeft] = useState(initialTime);

  useEffect(() => {
    setTimeLeft(initialTime); // Reset the timer when the question changes
  }, [questionIndex, initialTime]);

  useEffect(() => {
    if (timeLeft <= 0 || isAnswered) {
      if (timeLeft <= 0) {
        onTimeUp();
      }
      return;
    }

    const timerId = setInterval(() => {
      setTimeLeft(time => {
        const newTime = time - 1;
        onTimeChange(newTime); // Call this function to update the parent component
        return newTime;
      });
    }, 1000);

    return () => clearInterval(timerId);
  }, [timeLeft, onTimeUp, isAnswered, onTimeChange]);

  const percentage = (timeLeft / initialTime) * 100;

  return (
    <div className="w-full bg-subtleBackground rounded-full p-1 shadow-md mt-4">
      <div className="flex items-center">
        <div 
          className="bg-accent/80 h-2 rounded-full transition-all duration-300 ease-in-out" 
          style={{ width: `${percentage}%` }}
        ></div>
        <span className="text-xs font-medium text-primary font-kameron ml-2">
          {Math.floor(timeLeft / 60).toString().padStart(2, '0')}:
          {(timeLeft % 60).toString().padStart(2, '0')}
        </span>
      </div>
    </div>
  );
};

export default Timer;

./dailymed/components/SubjectCard.tsx:
import React from 'react';
import styled from 'styled-components';
import { Dna } from 'lucide-react';
import Link from 'next/link';
import GlowingBorder from './GlowingBorder';

interface SubjectCardProps {
  SubjectName: string;
  SubjectId: string;
  subheading: string;
  description: string;
  color: string;
  icon: string;
}

const CardWrapper = styled.div`
  min-width: 300px;
  width: 100%;
  position: relative;
`;

const CardContent = styled.div<{ $color: string }>`
  background-color: transparent;
  padding: 32px;
  border: 2px solid --primary/80;};
  border-radius: 12px;
  transition: transform 0.3s ease;
  height: 100%;
  display: flex;
  flex-direction: column;

  &:hover {
    transform: scale(1.05);
  }
`;

const Title = styled.h3`
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.5rem;
  font-weight: bold;
  font-family: 'Kameron', serif;
  margin-bottom: 0.75rem;
`;

const Question = styled.p`
  
  font-size: 1.1rem;
  font-weight: 600;
  font-family: 'Kameron', serif;
  margin-bottom: 0.75rem;
`;

const Description = styled.p`
  
  font-size: 1rem;
  margin-bottom: 1.5rem;
`;

const IconWrapper = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 1rem;
  background-color: var(--primary/80);
  border-radius: 12px;
  margin-top: auto;
`;

const SubjectCard: React.FC<SubjectCardProps> = ({ SubjectName, SubjectId, subheading, description, color, icon }) => {
  const IconComponent = Dna;

  return (
    <CardWrapper>
      <GlowingBorder animationDuration={5} borderWidth={3} borderRadius={12}>
        <CardContent $color={color}>
          <Title>{SubjectName}</Title>
          <Question>{subheading}</Question>
          <Description>{description}</Description>
          <IconWrapper>
            <IconComponent size={40} />
          </IconWrapper>
        </CardContent>
        <Link href={`/quiz/${SubjectId}`} legacyBehavior passHref>
          <a aria-label={SubjectName} style={{ position: 'absolute', inset: 0 }} />
        </Link>
      </GlowingBorder>
    </CardWrapper>
  );
};

export default SubjectCard;

./dailymed/components/SubjectSection.tsx:

import React from 'react';
import SubjectCard from './SubjectCard';
import Container from './Container';
import { useSubjects } from '@/contexts/SubjectsContext';
import LoadingSpinner from './LoadingSpinner';



const SubjectsSection = () => {
  const { subjects, isLoading } = useSubjects();

  if (subjects.length === 0) {
    return (
      <section className="py-12">
        <Container>
          <h2 className="text-3xl font-bold font-kameron text-center mb-8 text-primary/80">Subjects</h2>
          <LoadingSpinner />
        </Container>
      </section>
    );
  }

  return (
    <section className="py-12">
    <Container>
      <h2 className="text-3xl font-bold font-kameron text-center mb-8 text-primary/80">Subjects</h2>
      <div className="flex justify-center">
      <div className="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-8 max-w-5xl">
        {subjects.map((subject) => (
          <SubjectCard key={subject.name} {...subject} />
        ))}
      </div>
    </div>
    </Container>
  </section>
  );
};

export default SubjectsSection;

./dailymed/components/ToasterProvider.tsx:
import React from 'react'
import { Toaster } from "@/components/ui/toaster"
import { useToast } from "@/components/ui/use-toast"

const ToasterProvider = ({ children }: { children: React.ReactNode }) => {
  return (
    <>
      {children}
      <Toaster />
    </>
  )
}

const useCustomToast = () => {
  const { toast } = useToast()

  const showToast = (message: string, type = "default") => {
    toast({
      title: type.charAt(0).toUpperCase() + type.slice(1),
      description: message,
      variant: type === "error" ? "destructive" : "success",
      duration: type === "error" ? 7000 : 5000, // Error messages stay longer
    })
  }

  return showToast
}

export { ToasterProvider, useCustomToast };

./dailymed/components/ui/button.tsx:
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center font-kameron whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-subtleBackground hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
        nav: "flex items-center space-x-1 text-primary/80 hover:text-primary font-kameron font-bold text-lg hover:underline transition-all duration-200",
        hint: "text-black font-kameron",
        incorrect: "bg-incorrect text-black border-accent font-semibold font-kameron",
        correct: "bg-correct font-bold text-black font-kameron",
        muted: "bg-gray-200 font-kameron text-muted-foreground",
        quiz: "border border-input bg-white hover:bg-accent hover:text-accent-foreground font-kameron",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button"
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
        ref={ref}
        {...props}
      />
    )
  }
)
Button.displayName = "Button"

export { Button, buttonVariants }


./dailymed/components/ui/card.tsx:
import * as React from "react"

import { cn } from "@/lib/utils"

const Card = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn(
      "rounded-lg border bg-card text-card-foreground shadow-sm",
      className
    )}
    {...props}
  />
))
Card.displayName = "Card"

const CardHeader = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex flex-col space-y-1.5 p-6", className)}
    {...props}
  />
))
CardHeader.displayName = "CardHeader"

const CardTitle = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h3
    ref={ref}
    className={cn(
      "text-2xl font-semibold leading-none tracking-tight",
      className
    )}
    {...props}
  />
))
CardTitle.displayName = "CardTitle"

const CardDescription = React.forwardRef<
  HTMLParagraphElement,
  React.HTMLAttributes<HTMLParagraphElement>
>(({ className, ...props }, ref) => (
  <p
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
CardDescription.displayName = "CardDescription"

const CardContent = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />
))
CardContent.displayName = "CardContent"

const CardFooter = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement>
>(({ className, ...props }, ref) => (
  <div
    ref={ref}
    className={cn("flex items-center p-6 pt-0", className)}
    {...props}
  />
))
CardFooter.displayName = "CardFooter"

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }


./dailymed/components/ui/dialog.tsx:
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col space-y-1.5 text-center sm:text-left font-kameron text-primary",
      className
    )}
    {...props}
  />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn(
      "flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",
      className
    )}
    {...props}
  />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight font-kameron text-primary",
      className
    )}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}


./dailymed/components/ui/drawer.tsx:
"use client"

import * as React from "react"
import { Drawer as DrawerPrimitive } from "vaul"

import { cn } from "@/lib/utils"

const Drawer = ({
  shouldScaleBackground = true,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (
  <DrawerPrimitive.Root
    shouldScaleBackground={shouldScaleBackground}
    {...props}
  />
)
Drawer.displayName = "Drawer"

const DrawerTrigger = DrawerPrimitive.Trigger

const DrawerPortal = DrawerPrimitive.Portal

const DrawerClose = DrawerPrimitive.Close

const DrawerOverlay = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Overlay
    ref={ref}
    className={cn("fixed inset-0 z-50 bg-black/80", className)}
    {...props}
  />
))
DrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName

const DrawerContent = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DrawerPortal>
    <DrawerOverlay />
    <DrawerPrimitive.Content
      ref={ref}
      className={cn(
        "fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",
        className
      )}
      {...props}
    >
      <div className="mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted" />
      {children}
    </DrawerPrimitive.Content>
  </DrawerPortal>
))
DrawerContent.displayName = "DrawerContent"

const DrawerHeader = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn("grid gap-1.5 p-4 text-center sm:text-left font-kameron", className)}
    {...props}
  />
)
DrawerHeader.displayName = "DrawerHeader"

const DrawerFooter = ({
  className,
  ...props
}: React.HTMLAttributes<HTMLDivElement>) => (
  <div
    className={cn("mt-auto flex flex-col gap-2 p-4", className)}
    {...props}
  />
)
DrawerFooter.displayName = "DrawerFooter"

const DrawerTitle = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Title
    ref={ref}
    className={cn(
      "text-lg font-semibold leading-none tracking-tight font-kameron text-primary",
      className
    )}
    {...props}
  />
))
DrawerTitle.displayName = DrawerPrimitive.Title.displayName

const DrawerDescription = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Description
    ref={ref}
    className={cn("text-sm text-muted-foreground", className)}
    {...props}
  />
))
DrawerDescription.displayName = DrawerPrimitive.Description.displayName

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
}


./dailymed/components/ui/input.tsx:
import * as React from "react"

import { cn } from "@/lib/utils"

export interface InputProps
  extends React.InputHTMLAttributes<HTMLInputElement> {}

const Input = React.forwardRef<HTMLInputElement, InputProps>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Input.displayName = "Input"

export { Input }


./dailymed/components/ui/label.tsx:
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva(
  "text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 font-kameron text-primary"
)

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &
    VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root
    ref={ref}
    className={cn(labelVariants(), className)}
    {...props}
  />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }


./dailymed/components/ui/navigation-menu.tsx:
import * as React from "react"
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu"
import { cva } from "class-variance-authority"
import { ChevronDown } from "lucide-react"

import { cn } from "@/lib/utils"

const NavigationMenu = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Root
    ref={ref}
    className={cn(
      "relative z-10 flex max-w-max flex-1 items-center justify-center",
      className
    )}
    {...props}
  >
    {children}
    <NavigationMenuViewport />
  </NavigationMenuPrimitive.Root>
))
NavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName

const NavigationMenuList = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.List
    ref={ref}
    className={cn(
      "group flex flex-1 list-none items-center justify-center space-x-1",
      className
    )}
    {...props}
  />
))
NavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName

const NavigationMenuItem = NavigationMenuPrimitive.Item

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-base font-semibold transition-colors hover:underline focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:underline data-[state=open]:underline font-kameron text-primary"
)

const NavigationMenuTrigger = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Trigger
    ref={ref}
    className={cn(navigationMenuTriggerStyle(), "group", className)}
    {...props}
  >
    {children}{" "}
    <ChevronDown
      className="relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuPrimitive.Trigger>
))
NavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName

const NavigationMenuContent = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Content
    ref={ref}
    className={cn(
      "left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",
      className
    )}
    {...props}
  />
))
NavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName

const NavigationMenuLink = NavigationMenuPrimitive.Link

const NavigationMenuViewport = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>
>(({ className, ...props }, ref) => (
  <div className={cn("absolute left-0 top-full flex justify-center")}>
    <NavigationMenuPrimitive.Viewport
      className={cn(
        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
        className
      )}
      ref={ref}
      {...props}
    />
  </div>
))
NavigationMenuViewport.displayName =
  NavigationMenuPrimitive.Viewport.displayName

const NavigationMenuIndicator = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Indicator
    ref={ref}
    className={cn(
      "top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",
      className
    )}
    {...props}
  >
    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
  </NavigationMenuPrimitive.Indicator>
))
NavigationMenuIndicator.displayName =
  NavigationMenuPrimitive.Indicator.displayName

export {
  navigationMenuTriggerStyle,
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
}

./dailymed/components/ui/SmoothScroll.tsx:
'use client';

import { useEffect } from 'react';
import { useRouter } from 'next/navigation';

const SmoothScroll = () => {
  const router = useRouter();

  useEffect(() => {

    const handleClick = (e: MouseEvent) => {
      let target = e.target as HTMLElement;
      
      // Traverse up the DOM tree to find the nearest link
      while (target && target !== document.body) {
        if (target.tagName === 'A' || (target.tagName === 'BUTTON' && target.hasAttribute('href'))) {
          const href = target.getAttribute('href');
          if (href?.startsWith('#')) {
            console.log('Link clicked:', href);
            e.preventDefault();
            const id = href.slice(1);
            const element = document.getElementById(id);
            if (element) {
              const yOffset = -60; // Adjust this value as needed
              const elementPosition = element.getBoundingClientRect().top;
              const offsetPosition = elementPosition + window.pageYOffset + yOffset;
              
              window.scrollBy({
                top: elementPosition + yOffset,
                behavior: 'smooth'
              });
            }
          } else if (href?.startsWith('/') && href.includes('#')) {
            // Handle internal links with hash
            e.preventDefault();
            const [path, hash] = href.split('#');
            router.push(path);
            setTimeout(() => {
              const element = document.getElementById(hash);
              if (element) {
                const yOffset = -60; // Adjust this value as needed
                const elementPosition = element.getBoundingClientRect().top;
                
                window.scrollBy({
                  top: elementPosition + yOffset,
                  behavior: 'smooth'
                });
              }
            }, 100); // Small delay to ensure the new page has loaded
          }
          break;
        }
        target = target.parentElement as HTMLElement;
      }
    };

    document.addEventListener('click', handleClick);

    return () => {
      console.log('SmoothScroll component unmounted');
      document.removeEventListener('click', handleClick);
    };
  }, [router]);

  return null;
};

export default SmoothScroll;

./dailymed/components/ui/textarea.tsx:
import * as React from "react"

import { cn } from "@/lib/utils"

export interface TextareaProps
  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(
  ({ className, ...props }, ref) => {
    return (
      <textarea
        className={cn(
          "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        ref={ref}
        {...props}
      />
    )
  }
)
Textarea.displayName = "Textarea"

export { Textarea }


./dailymed/components/ui/toast.tsx:
"use client"

import * as React from "react"
import * as ToastPrimitives from "@radix-ui/react-toast"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground font-kameron",
        destructive:
          "destructive group font-kameron border-destructive bg-destructive text-destructive-foreground",
        success:
          "border border-secondary/20 bg-background text-primary/80 font-kameron ",
      
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
      className
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn("text-sm font-semibold", className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn("text-sm opacity-90", className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>

type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}


./dailymed/components/ui/toaster.tsx:
"use client"

import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from "@/components/ui/toast"
import { useToast } from "@/components/ui/use-toast"

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}


./dailymed/components/ui/use-toast.ts:
"use client"

// Inspired by react-hot-toast library
import * as React from "react"

import type {
  ToastActionElement,
  ToastProps,
} from "@/components/ui/toast"

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType["ADD_TOAST"]
      toast: ToasterToast
    }
  | {
      type: ActionType["UPDATE_TOAST"]
      toast: Partial<ToasterToast>
    }
  | {
      type: ActionType["DISMISS_TOAST"]
      toastId?: ToasterToast["id"]
    }
  | {
      type: ActionType["REMOVE_TOAST"]
      toastId?: ToasterToast["id"]
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      }

    case "DISMISS_TOAST": {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t
        ),
      }
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, "id">

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id })

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  }
}

export { useToast, toast }


./dailymed/components/WorkflowSection.tsx:

import React from 'react';
import Container from './Container';


const WorkflowSection: React.FC<{ id?: string }> = ({ id }) => {
    return (
      <section id={id} className="py-12">
    <Container>
      <h2 className="text-3xl font-bold font-kameron text-center text-primary/90 mb-8">Workflow</h2>

      <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 max-w-5xl">
        <p className="text-l text-gray-600 text-justify">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam vestibulum fermentum mauris ut mattis. Integer vestibulum cursus interdum. Aenean iaculis est eu consequat ultrices. Praesent eleifend posuere sollicitudin. Phasellus a nunc eget lectus iaculis cursus in dapibus nisi. Etiam id purus dolor. Integer viverra lectus eget nisi viverra, non accumsan ligula efficitur. Donec efficitur enim pharetra mi dapibus, vitae convallis risus tempus. Ut viverra dui vel ante dictum, ultrices maximus mi laoreet. Sed fringilla dictum feugiat.
        </p>        <p className="text-l text-gray-600 text-justify">In hac habitasse platea dictumst. Aliquam in metus tortor. In dapibus ultrices scelerisque. Proin laoreet odio et turpis mattis pulvinar. Etiam non risus maximus, laoreet dui non, pellentesque orci. Fusce quis nibh nec elit congue dignissim ac ut elit. Donec placerat, metus sed dapibus viverra, nibh massa semper justo, in commodo purus ante sed lacus. Maecenas at cursus ante, ac consequat urna. Praesent sed pellentesque neque, a ornare magna. Vestibulum posuere dolor eget arcu euismod tristique. Nunc tempus lorem et tortor pretium placerat.
        </p>        <p className="text-l text-gray-600 text-justify">Nulla posuere eget lorem eu dapibus. Vestibulum nulla risus, blandit non pellentesque eget, ultricies a sem. Donec mattis ante lectus. In et iaculis leo, sit amet aliquet sapien. Vivamus sed elit non dolor consectetur suscipit. Phasellus mi arcu, venenatis a dolor vel, tincidunt luctus ex. In bibendum condimentum ipsum et sodales. Ut dapibus mi eros, vel porta sapien finibus non.
        </p>        <p className="text-l text-gray-600 text-justify">Maecenas placerat tellus eget pulvinar feugiat. Praesent molestie magna a velit commodo, vitae eleifend massa consectetur. Quisque in ornare arcu. Vivamus dapibus magna nulla, nec maximus dolor semper iaculis. Nullam ut consectetur lorem, non semper ipsum. Proin et pharetra odio, id interdum eros. Donec eros augue, aliquam at magna in, cursus condimentum orci. Donec ultricies dui eleifend, maximus elit a, bibendum sem. Proin non nunc ut nunc euismod pellentesque. Nullam ut dignissim ante.
        </p>
</div>
    </Container>
  </section>
  );
};

export default WorkflowSection;

./dailymed/contexts/SubjectsContext.tsx:
// contexts/SubjectsContext.tsx
import React, { createContext, useState, useEffect, useContext } from 'react';

interface Subject {
    SubjectName: string;
    SubjectId: string;
    description: string;
    subheading: string;
    icon: string;
    color: '';
  }

interface SubjectsContextType {
  subjects: Subject[];
  isLoading: boolean;
}

const SubjectsContext = createContext<SubjectsContextType>({ subjects: [], isLoading: true });

export const SubjectsProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [subjects, setSubjects] = useState<Subject[]>([]);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    fetch('http://localhost:5000/api/init')
      .then(response => response.json())
      .then(data => {
        setSubjects(data);
        setIsLoading(false);
      })
      .catch(error => {
        console.error('Error fetching subjects:', error);
        setIsLoading(false);
      });
  }, []);

  return (
    <SubjectsContext.Provider value={{ subjects, isLoading }}>
      {children}
    </SubjectsContext.Provider>
  );
};

export const useSubjects = () => useContext(SubjectsContext);

./dailymed/lib/utils.ts:
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}


./dailymed/next-env.d.ts:
/// <reference types="next" />
/// <reference types="next/image-types/global" />
/// <reference types="next/navigation-types/compat/navigation" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/basic-features/typescript for more information.


./dailymed/pages/api/auth/callback/google.ts:
import { NextApiRequest, NextApiResponse } from 'next'

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  const { code } = req.query

  if (code) {
    try {
      const response = await fetch('http://localhost:5000/api/auth/login/google/callback', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ code }),
      })

      const data = await response.json()

      if (response.ok) {
        // Store the token in localStorage or a secure cookie
        res.setHeader('Set-Cookie', `token=${data.token}; HttpOnly; Path=/; Max-Age=86400`)
        res.redirect('/')
      } else {
        res.status(400).json({ error: 'Authentication failed' })
      }
    } catch (error) {
      res.status(500).json({ error: 'Server error' })
    }
  } else {
    res.status(400).json({ error: 'No code provided' })
  }
}

./dailymed/styles/globals.css:
@tailwind base;
@tailwind components;
@tailwind utilities;

/* You can add any additional global styles here */
@layer base {
    :root {
        --background: 195 35% 95%;
        --foreground: 193 76% 8%;
    
        --primary: 179 90% 11%;
        --primary-foreground: 0 0% 100%;
     
        --secondary: 176 46% 49%;
        --secondary-foreground: 0 0% 100%;
     
        --accent: 35 86% 69%;
        --accent-foreground: 193 76% 8%;
     
        --muted: 195 35% 85%;
        --muted-foreground: 193 76% 30%;
     
        --card: 195 35% 95%;
        --card-foreground: 193 76% 8%;
     
        --popover: 195 35% 95%;
        --popover-foreground: 193 76% 8%;
     
        --border: 195 35% 85%;
        --input: 195 35% 85%;
        
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 0 0% 100%;
    
        --ring: 176 46% 49%;
        --header-height: 4rem;
        --radius: 0.5rem;
    }
   
    .dark {
      --background: 222.2 84% 4.9%;
      --foreground: 210 40% 98%;
   
      --card: 222.2 84% 4.9%;
      --card-foreground: 210 40% 98%;
   
      --popover: 222.2 84% 4.9%;
      --popover-foreground: 210 40% 98%;
   
      --primary: 210 40% 98%;
      --primary-foreground: 222.2 47.4% 11.2%;
   
      --secondary: 217.2 32.6% 17.5%;
      --secondary-foreground: 210 40% 98%;
   
      --muted: 217.2 32.6% 17.5%;
      --muted-foreground: 215 20.2% 65.1%;
   
      --accent: 217.2 32.6% 17.5%;
      --accent-foreground: 210 40% 98%;
   
      --destructive: 0 62.8% 30.6%;
      --destructive-foreground: 210 40% 98%;
   
      --border: 217.2 32.6% 17.5%;
      --input: 217.2 32.6% 17.5%;
      --ring: 212.7 26.8% 83.9%;
    }
    .balanced-gradient {
      background: linear-gradient(
        to right,
        hsl(var(--gradient-1)) 0%,
        hsl(var(--gradient-2)) 25%,
        hsl(var(--gradient-3) / 0.8) 50%,
        hsl(var(--gradient-4)) 75%,
        hsl(var(--gradient-5)) 100%
      );
      height: 1px;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    }
  }

./dailymed/tailwind.config.ts:
import type { Config } from "tailwindcss"

const config = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{ts,tsx}',
    './components/**/*.{ts,tsx}',
    './app/**/*.{ts,tsx}',
    './src/**/*.{ts,tsx}',
	],
  prefix: "",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      fontFamily: {
        kameron: ['var(--font-kameron)'], // This uses the CSS variable we defined
      },
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        teal: {
          600: '#38A89D', // Adjust this color if needed to match your design
        },
        hint: {
          DEFAULT: '#53AEA0',
          light: 'rgba(83, 174, 160, 0.25)',
        },
        incorrect: {
          DEFAULT: '#EC7C7C',
          light: 'rgba(236, 124, 124, 0.25)',
          med: 'rgba(236, 124, 124, 0.75)',
          high: 'rgba(236, 124, 124, 1)',
        },
        correct: {
          DEFAULT: '#76DB74',
          light: 'rgba(118, 219, 116, 0.25)',
          med: 'rgba(118, 219, 116, 0.75)',
        },
        textColor: '#181f13',
        backgroundColor: '#EDF5F8',
        subtleBackground: '#f0f5f5',
        primaryColor: '#033937',
        secondaryColor: '#43B6AF',
        accentColor: '#F3B96C',
        'gradient-1': '#DFE9ED',
        'gradient-2': '#57B5A6',
        'gradient-3': '#16443C',
        'gradient-4': '#F1BA6D',
        'gradient-5': '#DDE8EC',
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config

export default config

./dailymed/utils/api.tsx:
import axios from 'axios';

const api = axios.create({
  baseURL: 'http://localhost:5000/api',
});

api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers['Authorization'] = `Bearer ${token}`;
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

export default api;

./dailymed/utils/getQuizData.tsx:
import api from '../utils/api';

interface QuizData {
  quizID: string;
  subjectName: string;
  subjectId: string;
  questions: Array<{
    questionNumber: number;
    questionText: string;
    answerOptions: string[];
    correctAnswer: string;
    correctAnswerIndex: number;
    hint: string;
    explanation: string;
  }>;
}

export async function getQuizData(subjectId: string): Promise<QuizData | { message: string, status: number }> {
  try {
    const response = await api.get(`/quiz/${subjectId}`);
    console.log('Quiz data:', response.data);
    
    if (response.data.status === 407) {
      return {
        message: response.data.message,
        status: response.data.status
      };
    }
    
    return response.data;
  } catch (error) {
    console.error('Error getting quiz data:', error);
    throw error;
  }
}

./dailymed/utils/mockQuizData.ts:
export const mockQuizData = {
    quizID: "sample-quiz-001",
    subjectName: "Clinical-Genetics",
    subjectId: "clinical_genetics",
    questions: [
      {
        questionNumber: 1,
        questionText: "What is the capital of France?",
        answerOptions: ["London", "Berlin", "Paris", "Madrid"],
        correctAnswer: "Paris",
        correctAnswerIndex: 2,
        hint: "This city is known as the City of Light.",
        explanation: "Paris is the capital and most populous city of France."
      },
      {
        questionNumber: 2,
        questionText: "Which planet is known as the Red Planet?",
        answerOptions: ["Venus", "Mars", "Jupiter", "Saturn"],
        correctAnswer: "Mars",
        correctAnswerIndex: 1,
        hint: "It's named after the Roman god of war.",
        explanation: "Mars is often called the Red Planet due to its reddish appearance."
      },
      {
        questionNumber: 3,
        questionText: "Who painted the Mona Lisa?",
        answerOptions: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
        correctAnswer: "Leonardo da Vinci",
        correctAnswerIndex: 2,
        hint: "This artist was also famous for his inventions and anatomical drawings.",
        explanation: "The Mona Lisa was painted by Leonardo da Vinci in the early 16th century."
      },
      {
        questionNumber: 4,
        questionText: "What is the largest ocean on Earth?",
        answerOptions: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
        correctAnswer: "Pacific Ocean",
        correctAnswerIndex: 3,
        hint: "It covers more than 30% of the Earth's surface.",
        explanation: "The Pacific Ocean is the largest and deepest of Earth's oceanic divisions."
      },
      {
        questionNumber: 5,
        questionText: "In what year did the first moon landing occur?",
        answerOptions: ["1965", "1969", "1971", "1973"],
        correctAnswer: "1969",
        correctAnswerIndex: 1,
        hint: "It was part of the Apollo 11 mission.",
        explanation: "The Apollo 11 mission successfully landed humans on the moon on July 20, 1969."
      }
    ]
  };

./dailymed/utils/sendFeedbackForm.tsx:
// ./dailymed/utils/sendFeedbackForm.tsx

import api from './api';

interface FeedbackForm {
  quizId: string;
  questionNumber: number;
  feedback: string;
}

export async function sendFeedbackForm(feedbackForm: FeedbackForm): Promise<void> {
  try {
    console.log('Submitting feedback:', feedbackForm);
    const response = await api.post('/quiz/feedback', feedbackForm);
    
    if (response.status === 200) {
      console.log('Feedback submitted successfully');
    } else {
      console.error('Failed to submit feedback');
    }
  } catch (error) {
    console.error('Error submitting feedback:', error);
    throw error;
  }
}

./dailymed/utils/sendQuizResults.tsx:
import api from './api';

interface QuizResult {
  quizId: string;
  score: number;
  answers: {
    questionNumber: number;
    userAnswer: number;
    isCorrect: boolean;
  }[];
}

export async function sendQuizResults(quizResult: QuizResult): Promise<void> {
  try {
    const response = await api.post('/quiz/submit', quizResult);
    
    if (response.status === 200) {
      console.log('Quiz results submitted successfully');
    } else {
      console.error('Failed to submit quiz results');
    }
  } catch (error) {
    console.error('Error submitting quiz results:', error);
    throw error;
  }
}

